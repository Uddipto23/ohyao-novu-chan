<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ohayo Novu-Chan</title>
  <style>
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, 'Helvetica Neue', Arial}
    :root{
      --bg1:#fff6fb;--bg2:#e8f7ff;--accent:#ff8fb1;--accent2:#ffd18f;--ground:#ffeedd
    }
    body{
      background: linear-gradient(180deg,var(--bg1),var(--bg2));
      display:flex;align-items:center;justify-content:center;overflow:hidden;
    }
    .wrap{width:980px;max-width:98vw;height:520px;background:transparent;position:relative;border-radius:18px;box-shadow:0 10px 30px rgba(18,18,24,0.08);}
    header{position:absolute;left:0;right:0;top:12px;text-align:center;z-index:20}
    h1{font-family: 'Poppins', Inter, sans-serif;margin:0;font-weight:700;color:#222;letter-spacing:1px}
    h1 .sub{display:block;font-size:12px;font-weight:600;color:#7b6b7b;margin-top:6px}
    #gameCanvas{display:block;width:100%;height:100%;border-radius:14px;background:transparent}
    .overlay{position:absolute;inset:0;background:linear-gradient(180deg,rgba(255,255,255,0.6),rgba(255,255,255,0.25));backdrop-filter:blur(3px);display:flex;align-items:center;justify-content:center;flex-direction:column;z-index:30;border-radius:14px}
    .btn{background:var(--accent);border:none;padding:12px 20px;border-radius:12px;font-weight:700;cursor:pointer;box-shadow:0 6px 18px rgba(255,143,177,0.18)}
    .btn.secondary{background:transparent;color:#333;border:2px solid rgba(0,0,0,0.06)}
    .hud{position:absolute;left:18px;top:18px;z-index:25;display:flex;gap:10px;align-items:center}
    .scoreBox{background:rgba(255,255,255,0.7);padding:8px 12px;border-radius:12px;font-weight:700;box-shadow:0 6px 20px rgba(4,0,0,0.03)}
    .rightHud{position:absolute;right:18px;top:18px;z-index:25}
    .tiny{font-size:12px;color:#6a5a6a}
    footer{position:absolute;left:0;right:0;bottom:8px;text-align:center;z-index:20;font-size:12px;color:#776}
    @media (max-width:600px){.wrap{height:78vh}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Ohayo Novu-Chan <span class="sub">Good morning! collect coins & be cute ‚ú®</span></h1>
    </header>
    <div class="hud">
      <div class="scoreBox">Score: <span id="score">0</span></div>
      <div class="scoreBox">High: <span id="high">0</span></div>
    </div>
    <div class="rightHud tiny">Tap / Space to jump ‚Ä¢ Auto difficulty</div>
    <canvas id="gameCanvas" width="980" height="520"></canvas>
    <div class="overlay" id="overlay">
      <h2 style="margin:0 0 10px 0; font-family:Poppins, Inter;">Ohayo Novu-Chan</h2>
      <p style="margin:0 0 18px 0; color:#5a4a58">A cute endless coin-runner ‚Äî collect coins, dodge obstacles, win smiles üíï</p>
      <div style="display:flex;gap:10px">
        <button class="btn" id="startBtn">Start</button>
        <button class="btn secondary" id="how">How to play</button>
      </div>
    </div>
    <footer>Made with ‚ù§Ô∏è. Press R to restart</footer>
  </div>

<script>
(()=> {
  const canvas = document.getElementById('gameCanvas');
  const ctx = canvas.getContext('2d');
  const W = canvas.width, H = canvas.height;

  let running = false, gameover=false;
  let score = 0; let high = parseInt(localStorage.getItem('ohayo-high')||0,10);
  document.getElementById('high').innerText = high;

  const AudioCtx = window.AudioContext || window.webkitAudioContext;
  let audioCtx = null;
  function beep(freq=880,time=0.06,vol=0.05){
    if(!audioCtx) audioCtx = new AudioCtx();
    const o = audioCtx.createOscillator(), g = audioCtx.createGain();
    o.type='sine'; o.frequency.value=freq; g.gain.value=vol;
    o.connect(g); g.connect(audioCtx.destination);
    o.start(); g.gain.exponentialRampToValueAtTime(0.0001,audioCtx.currentTime+time);
    o.stop(audioCtx.currentTime+time+0.02);
  }

  let gravity=0.9, groundY=H-90, speed=4, tick=0;
  const player={x:120,y:groundY-60,w:64,h:64,vy:0,onGround:true};

  let obstacles=[], coins=[], spawnTimer=0, coinTimer=0;

  function reset(){
    score=0;speed=4;tick=0;gameover=false;
    player.y=groundY-player.h;player.vy=0;player.onGround=true;
    obstacles=[];coins=[];spawnTimer=0;coinTimer=0;
    document.getElementById('score').innerText=score;
    overlay.querySelector('h2').innerText='Ohayo Novu-Chan';
    overlay.querySelector('p').innerText='A cute endless coin-runner ‚Äî collect coins, dodge obstacles, win smiles üíï';
    document.getElementById('startBtn').innerText='Start';
  }

  function spawnObstacle(){
    const h=40+Math.random()*50;
    obstacles.push({x:W+40+Math.random()*400,y:groundY-h,w:30+Math.random()*30,h:h,passed:false});
  }
  function spawnCoin(){
    const cy=groundY-120-Math.random()*140;
    coins.push({x:W+20,y:cy,r:12,claimed:false});
  }

  function rectsCollide(a,b){return a.x<b.x+b.w&&a.x+a.w>b.x&&a.y<b.y+b.h&&a.y+a.h>b.y;}
  function circleRectCollide(c,r){
    const cx=c.x,cy=c.y,rx=r.x,ry=r.y,rw=r.w,rh=r.h;
    const closestX=Math.max(rx,Math.min(cx,rx+rw));
    const closestY=Math.max(ry,Math.min(cy,ry+rh));
    const dx=cx-closestX,dy=cy-closestY;
    return dx*dx+dy*dy<c.r*c.r;
  }

  function jump(){if(gameover)return;if(player.onGround){player.vy=-16;player.onGround=false;beep(900,0.08,0.06);}}

  window.addEventListener('keydown',e=>{
    if(e.code==='Space'){e.preventDefault();jump();}
    if((e.key==='r'||e.key==='R')&&gameover){reset();running=true;overlayHide();}
  });
  canvas.addEventListener('pointerdown',()=>{jump();if(!running){startGame();}});

  const overlay=document.getElementById('overlay');
  document.getElementById('startBtn').addEventListener('click',()=>{
    if(gameover){reset();}
    startGame();overlayHide();
  });
  document.getElementById('how').addEventListener('click',()=>{alert('Tap or press Space to jump. Collect coins and avoid obstacles. Game speeds up over time.');});
  function overlayHide(){overlay.style.display='none';}
  function overlayShow(){overlay.style.display='flex';}

  function drawNovu(x,y,w,h){
    const cx=x+w/2,cy=y+h/2;
    ctx.beginPath();ctx.ellipse(cx,y+h+6,w*0.48,8,0,0,Math.PI*2);ctx.fillStyle='rgba(0,0,0,0.06)';ctx.fill();
    ctx.beginPath();ctx.arc(cx,cy,w*0.45,0,Math.PI*2);ctx.fillStyle='#fff';ctx.fill();
    ctx.beginPath();ctx.ellipse(cx-w*0.18,cy+w*0.08,10,6,0,0,Math.PI*2);ctx.fillStyle='#ffd6e0';ctx.fill();
    ctx.beginPath();ctx.ellipse(cx+w*0.18,cy+w*0.06,10,6,0,0,Math.PI*2);ctx.fillStyle='#ffd6e0';ctx.fill();
    ctx.beginPath();ctx.arc(cx-w*0.12,cy-w*0.06,5,0,Math.PI*2);ctx.fillStyle='#332';ctx.fill();
    ctx.beginPath();ctx.arc(cx+w*0.12,cy-w*0.06,5,0,Math.PI*2);ctx.fillStyle='#332';ctx.fill();
    ctx.beginPath();ctx.arc(cx,cy+6,8,0,Math.PI);ctx.strokeStyle='#4a3';ctx.lineWidth=1.8;ctx.stroke();
    ctx.beginPath();ctx.moveTo(cx-w*0.45,cy-w*0.25);ctx.lineTo(cx-w*0.68,cy-w*0.58);ctx.lineTo(cx-w*0.25,cy-w*0.34);ctx.closePath();ctx.fillStyle='#ffb6d0';ctx.fill();
    ctx.beginPath();ctx.moveTo(cx+w*0.45,cy-w*0.25);ctx.lineTo(cx+w*0.68,cy-w*0.58);ctx.lineTo(cx+w*0.25,cy-w*0.34);ctx.closePath();ctx.fillStyle='#ffd29a';ctx.fill();
  }

  function drawCoin(x,y,r){
    ctx.beginPath();ctx.arc(x,y,r,0,Math.PI*2);ctx.fillStyle='#fff7c7';ctx.fill();
    ctx.beginPath();ctx.arc(x,y,r*0.65,0,Math.PI*2);ctx.fillStyle='#ffd24d';ctx.fill();
    ctx.beginPath();ctx.fillStyle='#fff7ea';ctx.fillRect(x-4,y-8,8,4);
  }

  function drawObstacle(o){
    ctx.save();ctx.translate(o.x,o.y);
    ctx.fillStyle='#ffd4e6';ctx.fillRect(0,0,o.w,o.h);
    ctx.fillStyle='#2a1a2a';ctx.fillRect(6,o.h-28,7,7);ctx.fillRect(o.w-14,o.h-28,7,7);
    ctx.restore();
  }

  function update(dt){
    tick++;
    if(tick%240===0){speed+=0.4;}
    player.vy+=gravity*0.6;player.y+=player.vy;
    if(player.y+player.h>=groundY){player.y=groundY-player.h;player.onGround=true;player.vy=0;}
    spawnTimer+=dt;
    const spawnInterval=Math.max(1200-Math.floor(speed*40),700);
    if(spawnTimer>spawnInterval){spawnTimer=0;spawnObstacle();}
    coinTimer+=dt;
    if(coinTimer>600){coinTimer=0;if(Math.random()>0.25)spawnCoin();}
    obstacles.forEach(o=>{o.x-=speed;});
    obstacles=obstacles.filter(o=>o.x+o.w>-30);
    coins.forEach(c=>{c.x-=speed;});
    coins=coins.filter(c=>c.x>-40);
    for(let o of obstacles){
      if(rectsCollide({x:player.x,y:player.y,w:player.w,h:player.h},o)){
        gameover=true;running=false;beep(160,0.15,0.06);overlayShow();
        overlay.querySelector('h2').innerText='Game Over';
        overlay.querySelector('p').innerText=`Score: ${score} ‚Ä¢ High: ${high}`;
        overlay.querySelector('#startBtn').innerText='Restart';
        if(score>high){high=score;localStorage.setItem('ohayo-high',high);document.getElementById('high').innerText=high;}
        return;
      }
    }
    for(let c of coins){
      if(!c.claimed&&circleRectCollide({x:c.x,y:c.y,r:c.r},{x:player.x,y:player.y,w:player.w,h:player.h})){
        c.claimed=true;score+=10;beep(1300,0.04,0.04);
      }
    }
    coins=coins.filter(c=>!c.claimed);
    if(tick%16===0){score+=1;}
    document.getElementById('score').innerText=score;
  }

  function draw(){
    ctx.clearRect(0,0,W,H);
    const g=ctx.createLinearGradient(0,0,0,H);
    g.addColorStop(0,'#fff6fb');g.addColorStop(1,'#e8f7ff');ctx.fillStyle=g;ctx.fillRect(0,0,W,H);
    ctx.beginPath();ctx.ellipse(120,groundY+20,260,80,0,0,Math.PI*2);ctx.fillStyle='#fff0f4';ctx.fill();
    ctx.beginPath();ctx.ellipse(700,groundY+40,360,90,0,0,Math.PI*2);ctx.fillStyle='#f7fff7';ctx.fill();
    ctx.fillStyle='#fff1e8';ctx.fillRect(0,groundY,W,H-groundY);
    coins.forEach(c=>drawCoin(c.x,c.y,c.r));
    obstacles.forEach(o=>drawObstacle(o));
    drawNovu(player.x,player.y,player.w,player.h);
  }

  let last=performance.now();
  function loop(now){
    const dt=now-last;last=now;
    if(running){update(dt);}
    draw();
    requestAnimationFrame(loop);
  }
  requestAnimationFrame(loop);

  function startGame(){if(!running){running=true;gameover=false;overlayHide();}}
  reset();
})();
</script>
</body>
</html>

